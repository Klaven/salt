{% set etcd_servers = [] -%}
{% for server, ipaddr in salt['mine.get']('roles:etcd', 'network.ip_addrs', expr_form='grain').items() -%}
  {% do etcd_servers.append('http://' + ipaddr[0] + ':2379') -%}
{% endfor -%}
# Flanneld configuration options

# etcd url location.  Point this to the server where etcd runs
FLANNEL_ETCD_ENDPOINTS="{{ ",".join(etcd_servers) }}"

# etcd config key.  This is the configuration key that flannel queries
# For address range assignment
FLANNEL_ETCD_KEY="/flannel/network"

# Any additional options that you want to pass
# [alvaro] use the private network for the communication
FLANNEL_OPTIONS="-iface eth0 --ip-masq"
